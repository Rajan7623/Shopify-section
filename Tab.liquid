
{%- if section.blocks.size > 0 -%}
<div class="section-spacing {% if section.settings.separate_section_with_border %}bordered-section{% endif %}">
  <div class=" {% if section.settings.text_alignment == 'center' %}container--xl{% endif %}">
    <div class="section-stack">
      {%- render 'section-header', subheading: section.settings.subheading, heading: section.settings.title, content: section.settings.content, text_alignment: section.settings.text_alignment -%}

      <!-- DESKTOP LAYOUT -->

      <x-tabs class="content-tabs  {% if section.settings.text_alignment == 'center' %}content-tabs--center{% endif %} ">
        <template shadowrootmode="open">
          <slot role="tablist" part="tab-list" name="title"></slot>
          <slot part="tab-panel-list" class="coll-tab" name="content"></slot>
        </template>

        {%- for block in section.blocks -%}
          {%- assign title = block.settings.title | default: block.settings.page.title -%}
          {%- assign content = block.settings.page.content | default: block.settings.content -%}

       
            <button class="h2" type="button" role="tab" slot="title" {{ block.shopify_attributes }}>{{ title }}</button>

            <div role="tabpanel" slot="content" >
              <div class="collection-products ">
                {% for product in block.settings.collection-tb.products %}
                  {%- render 'product-card', 
                    product: product, 
                    reveal: should_reveal, 
                    hide_product_information: section.settings.hide_product_information, 
                    block: block 
                  -%}
                {% endfor %}
              </div>
            </div>
          
        {%- endfor -%}
      </x-tabs>
    </div>
  </div>
</div>
{%- endif -%}

{% schema %}
{
"name": "collection-tab",
"max_blocks": 5,
"disabled_on": {
  "groups": ["header", "custom.overlay"]
},
"settings": [
  {
    "type": "checkbox",
    "id": "separate_section_with_border",
    "label": "t:global.section.separate_section_with_border",
    "default": true
  },
  {
    "type": "inline_richtext",
    "id": "subheading",
    "label": "t:global.text.subheading",
    "default": "Subheading"
  },
  {
    "type": "inline_richtext",
    "id": "title",
    "label": "t:global.text.heading",
    "default": "Heading"
  },
  {
    "type": "select",
    "id": "text_alignment",
    "label": "t:global.text.alignment",
    "options": [
      {
        "value": "start",
        "label": "t:global.position.left"
      },
      {
        "value": "center",
        "label": "t:global.position.center"
      }
    ],
    "default": "center"
  }
],
"blocks": [
  {
    "type": "tab",
    "name": "t:sections.tabs.blocks.tab.name",
    "settings": [
      {
        "type": "inline_richtext",
        "id": "title",
        "label": "t:global.text.title",
        "default": "Tab"
      },
      {
       "type": "collection",
       "id": "collection-tb",
       "label": "Collection"
      }
    ]
  }
],
"presets": [
  {
    "name": "collection-tab",
    "blocks": [
      {
        "type": "tab",
        "settings": {
          "title": "Tab 1"
        }
      },
      {
        "type": "tab",
        "settings": {
          "title": "Tab 2"
        }
      }
      
    ]
  }
]
}
{% endschema %}
